{"title":"RUM/APM - Solr, Node.JS, Angular","description":"","widgets":[{"id":1459033760282980,"layout":{"x":0,"y":7,"width":43,"height":22},"definition":{"title":"","title_size":"16","title_align":"left","type":"hostmap","requests":{"fill":{"q":"avg:system.cpu.user{$env} by {host}"}},"node_type":"host","no_metric_hosts":true,"no_group_hosts":true,"group":["env"],"scope":["$env"],"style":{"palette":"green_to_orange","palette_flip":false}}},{"id":7685229018522260,"layout":{"x":44,"y":7,"width":47,"height":22},"definition":{"title":"","title_size":"16","title_align":"left","type":"servicemap","service":"$service","filters":["$env","container:*"]}},{"id":4082987991424904,"layout":{"x":0,"y":0,"width":43,"height":6},"definition":{"type":"free_text","text":"Infrastructure","color":"#4d4d4d","font_size":"auto","text_align":"left"}},{"id":3412331513704490,"layout":{"x":44,"y":0,"width":47,"height":6},"definition":{"type":"free_text","text":"Application","color":"#4d4d4d","font_size":"auto","text_align":"left"}},{"id":3708927341561872,"layout":{"x":92,"y":0,"width":48,"height":6},"definition":{"type":"free_text","text":"RUM","color":"#4d4d4d","font_size":"auto","text_align":"left"}},{"id":6982924690036752,"layout":{"x":0,"y":30,"width":43,"height":15},"definition":{"title":"","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"q":"avg:system.cpu.user{$env}","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]}},{"id":7228837569954404,"layout":{"x":0,"y":46,"width":43,"height":15},"definition":{"title":"","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"q":"sum:system.mem.total{$env} by {env}","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"sum:system.mem.used{$env} by {env}","on_right_yaxis":false,"style":{"palette":"warm","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]}},{"id":4830296642103252,"layout":{"x":44,"y":30,"width":47,"height":15},"definition":{"title":"APM - API: Node.JS to Solr Requests","title_size":"16","title_align":"left","type":"query_table","requests":[{"cell_display_mode":["bar"],"apm_stats_query":{"primary_tag":"container:*","name":"express.request","service":"$service","row_type":"resource","env":"$env","columns":[{"cell_display_mode":"bar","name":"Hits","order":"desc"},{"cell_display_mode":"bar","name":"p95"},{"cell_display_mode":"bar","name":"Errors"}]}}]}},{"id":8170671724769480,"layout":{"x":44,"y":46,"width":47,"height":15},"definition":{"title":"APM - SolrSearch Requests","title_size":"16","title_align":"left","type":"query_table","requests":[{"cell_display_mode":["bar"],"apm_stats_query":{"primary_tag":"container:*","name":"servlet.request","service":"solr","row_type":"resource","env":"$env","columns":[{"cell_display_mode":"bar","name":"Hits","order":"desc"},{"cell_display_mode":"bar","name":"p95"},{"cell_display_mode":"bar","name":"Errors"}]}}]}},{"id":8082149990453060,"layout":{"x":141,"y":0,"width":46,"height":6},"definition":{"type":"free_text","text":"Logs","color":"#4d4d4d","font_size":"auto","text_align":"left"}},{"id":265980081724204,"layout":{"x":141,"y":7,"width":47,"height":31},"definition":{"title":"Solr: Logs","title_size":"16","title_align":"left","type":"log_stream","indexes":[],"query":"source:solr","sort":{"column":"time","order":"desc"},"columns":["host","service"],"show_date_column":true,"show_message_column":true,"message_display":"expanded-md"}},{"id":392485336880614,"layout":{"x":92,"y":7,"width":48,"height":15},"definition":{"title":"RUM - Path hits by App ID","title_size":"16","title_align":"left","type":"query_table","requests":[{"cell_display_mode":["bar","bar"],"rum_query":{"index":"*","search":{"query":""},"group_by":[{"facet":"@view.url_path","sort":{"facet":"@view.action.count","order":"desc","aggregation":"sum"},"limit":10}],"multi_compute":[{"facet":"@view.action.count","aggregation":"sum"},{"facet":"@view.error.count","aggregation":"avg"}]}}]}},{"id":4096810664483472,"layout":{"x":92,"y":23,"width":48,"height":15},"definition":{"title":"RUM - App Stats","title_size":"16","title_align":"left","type":"query_table","requests":[{"cell_display_mode":["bar","bar","bar","bar"],"rum_query":{"index":"*","search":{"query":"@application.id:*"},"group_by":[{"facet":"@application.id","sort":{"facet":"@view.error.count","order":"desc","aggregation":"sum"},"limit":10}],"multi_compute":[{"facet":"@view.error.count","aggregation":"sum"},{"aggregation":"count"},{"facet":"@view.action.count","aggregation":"sum"},{"facet":"@resource.first_byte.duration","aggregation":"pc99"}]}}]}},{"id":2178091405151250,"layout":{"x":92,"y":89,"width":48,"height":15},"definition":{"title":"Solr: Num Indexed Docs","title_size":"16","title_align":"left","type":"query_value","requests":[{"q":"sum:solr.searcher.numdocs{$env} by {env}","aggregator":"sum"}],"autoscale":true,"custom_unit":"Keys","precision":0}},{"id":2718401748273882,"layout":{"x":92,"y":66,"width":48,"height":6},"definition":{"type":"free_text","text":"Solr","color":"#4d4d4d","font_size":"auto","text_align":"left"}},{"id":593743119812902,"layout":{"x":92,"y":105,"width":48,"height":15},"definition":{"title":"Solr: Search Request Rate","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"q":"sum:solr.search_handler.requests{$env} by {env}","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]}},{"id":5453218287828014,"layout":{"x":92,"y":73,"width":48,"height":15},"definition":{"title":"Solr: Num Records","title_size":"16","title_align":"left","type":"query_value","requests":[{"q":"sum:solr.searcher.numdocs{$env} by {env}","aggregator":"avg"}],"autoscale":true,"custom_unit":"Docs"}},{"id":2323901617037542,"layout":{"x":0,"y":62,"width":43,"height":15},"definition":{"title":"","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"q":"sum:jvm.heap_memory{$env} by {env}","on_right_yaxis":false,"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"},{"q":"sum:jvm.heap_memory_max{$env} by {env}","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]}},{"id":404968278582370,"layout":{"x":92,"y":121,"width":48,"height":15},"definition":{"title":"Solr: Requests processing time percentiles","show_legend":false,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"q":"avg:solr.search_handler.request_times.50percentile{$env}, avg:solr.search_handler.request_times.75percentile{$env}, avg:solr.search_handler.request_times.90percentile{$env}, avg:solr.search_handler.request_times.95percentile{$env}, avg:solr.search_handler.request_times.99percentile{$env}, avg:solr.search_handler.request_times.999percentile{$env}","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]}},{"id":8196020636219728,"layout":{"x":0,"y":78,"width":43,"height":15},"definition":{"title":"","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"q":"sum:jvm.thread_count{$env} by {env}","on_right_yaxis":false,"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]}},{"id":300497611632952,"layout":{"x":141,"y":54,"width":47,"height":20},"definition":{"title":"Ecosystem Events","title_size":"16","title_align":"left","type":"event_stream","query":"*","tags_execution":"and","event_size":"s"}},{"id":2713227123314702,"layout":{"x":44,"y":110,"width":47,"height":15},"definition":{"title":"APM: Trace Node.JS API","title_size":"16","title_align":"left","type":"query_table","requests":[{"cell_display_mode":["bar"],"apm_stats_query":{"primary_tag":"container:*","name":"http.request","service":"ddsolrapp-http-client","row_type":"resource","env":"$env","columns":[{"cell_display_mode":"bar","name":"Hits","order":"desc"},{"cell_display_mode":"bar","name":"p95"},{"cell_display_mode":"bar","name":"Errors"}]}}]}},{"id":5038093627922282,"layout":{"x":141,"y":39,"width":23,"height":14},"definition":{"title":"Logs: SolrSearch App Queries","title_size":"16","title_align":"left","type":"query_value","requests":[{"aggregator":"avg","log_query":{"index":"*","search":{"query":"message:\"*facet=on*\""},"group_by":[],"compute":{"aggregation":"count"}}}],"autoscale":true,"custom_unit":"logs"}},{"id":3558204420388518,"layout":{"x":121,"y":39,"width":19,"height":14},"definition":{"title":"RUM: Angular SolrSearch Session","title_size":"16","title_align":"left","type":"query_value","requests":[{"aggregator":"avg","rum_query":{"index":"*","search":{"query":""},"group_by":[],"compute":{"facet":"@session.id","aggregation":"cardinality"}}}],"autoscale":true,"custom_unit":"Rums"}},{"id":7108466689923854,"layout":{"x":92,"y":54,"width":14,"height":11},"definition":{"title":"Views","type":"query_value","requests":[{"aggregator":"avg","rum_query":{"index":"*","search":{"query":"@type:view $service $env @session.type:user"},"group_by":[],"compute":{"aggregation":"count"}}}],"autoscale":true,"custom_links":[{"link":"/rum/explorer?&tab=view","label":"Explore related views"}],"precision":2}},{"id":194323418021420,"layout":{"x":107,"y":54,"width":13,"height":11},"definition":{"title":"AVG Session","type":"query_value","requests":[{"aggregator":"avg","rum_query":{"index":"*","search":{"query":"$env $service @session.type:user"},"group_by":[],"compute":{"facet":"@session.time_spent","aggregation":"avg"}}}],"autoscale":true,"precision":2}},{"id":572200923285384,"layout":{"x":92,"y":39,"width":28,"height":14},"definition":{"title":"🖥 Top browsers","type":"toplist","requests":[{"rum_query":{"index":"*","search":{"query":"@type:session $service       $env @session.type:\"user\""},"group_by":[{"facet":"@browser.name","sort":{"aggregation":"count","order":"desc"},"limit":10}],"compute":{"aggregation":"count"}}}]}},{"id":1868335241734520,"layout":{"x":121,"y":54,"width":19,"height":11},"definition":{"title":"APM: Traces Solr + Node.JS","title_size":"16","title_align":"left","type":"query_value","requests":[{"q":"avg:trace.express.request.hits{*} by {service}.as_count()","aggregator":"avg"}],"autoscale":true,"custom_unit":"apms","precision":0}},{"id":4361840838611504,"layout":{"x":44,"y":62,"width":47,"height":15},"definition":{"title":"APM: Trace by Version","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"q":"avg:trace.http.request.hits.by_http_status{$env,$service} by {version}","on_right_yaxis":false,"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]}},{"id":8833692868922050,"layout":{"x":44,"y":78,"width":47,"height":15},"definition":{"title":"APM - SolrSearch Requests","title_size":"16","title_align":"left","type":"query_table","requests":[{"cell_display_mode":["bar"],"apm_stats_query":{"primary_tag":"container:*","name":"express.request","service":"ddsolrapp","row_type":"resource","env":"$env","columns":[{"cell_display_mode":"bar","name":"Hits","order":"desc"},{"cell_display_mode":"bar","name":"p95"},{"cell_display_mode":"bar","name":"Errors"}]}}]}},{"id":3531730627578652,"layout":{"x":44,"y":94,"width":47,"height":15},"definition":{"title":"APM: Solr to Datadog Port Req","title_size":"16","title_align":"left","type":"query_table","requests":[{"cell_display_mode":["bar"],"apm_stats_query":{"primary_tag":"container:*","name":"tcp.connect","service":"ddsolrapp-tcp","row_type":"resource","env":"$env","columns":[{"cell_display_mode":"bar","name":"Hits","order":"desc"},{"cell_display_mode":"bar","name":"p95"},{"cell_display_mode":"bar","name":"Errors"}]}}]}},{"id":1052760609512606,"layout":{"x":0,"y":94,"width":43,"height":15},"definition":{"title":"","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"q":"sum:system.disk.total{$env} by {env}","on_right_yaxis":false,"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"},{"q":"sum:system.disk.used{$env} by {env}","on_right_yaxis":false,"style":{"palette":"purple","line_type":"solid","line_width":"normal"},"display_type":"area"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]}},{"id":5752759731488754,"layout":{"x":0,"y":110,"width":43,"height":15},"definition":{"title":"","title_size":"16","title_align":"left","show_legend":false,"legend_layout":"vertical","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"q":"sum:jvm.cpu_load.process{$env} by {env}","on_right_yaxis":false,"style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}],"yaxis":{"scale":"linear","label":"","include_zero":true,"min":"auto","max":"auto"},"markers":[]}},{"id":2395396106298488,"layout":{"x":165,"y":39,"width":23,"height":14},"definition":{"title":"Log Count","title_size":"16","title_align":"left","type":"query_value","requests":[{"aggregator":"avg","log_query":{"index":"*","search":{"query":""},"group_by":[],"compute":{"aggregation":"count"}}}],"autoscale":true,"custom_unit":"logs"}},{"id":4657346384836776,"layout":{"x":141,"y":75,"width":47,"height":14},"definition":{"title":"Log Count","title_size":"16","title_align":"left","type":"toplist","requests":[{"log_query":{"index":"*","search":{"query":""},"group_by":[{"facet":"status","sort":{"order":"desc","aggregation":"count"},"limit":10}],"compute":{"aggregation":"count"}}}]}},{"id":8448310001284916,"layout":{"x":141,"y":90,"width":47,"height":22},"definition":{"title":"","title_size":"16","title_align":"left","type":"query_table","requests":[{"cell_display_mode":["bar"],"rum_query":{"index":"*","search":{"query":"$session_id"},"group_by":[{"facet":"@action.id","sort":{"order":"desc","aggregation":"count"},"limit":10},{"facet":"@browser.name","sort":{"order":"desc","aggregation":"count"},"limit":10},{"facet":"@browser.version","sort":{"order":"desc","aggregation":"count"},"limit":10}],"compute":{"aggregation":"count"}}}]}},{"id":810603633211998,"layout":{"x":141,"y":113,"width":47,"height":23},"definition":{"title":"","title_size":"16","title_align":"left","type":"query_table","requests":[{"cell_display_mode":["bar","bar","bar","bar"],"rum_query":{"index":"*","search":{"query":"$session_id"},"group_by":[{"facet":"@session.id","sort":{"order":"desc","aggregation":"count"},"limit":10},{"facet":"@view.id","sort":{"order":"desc","aggregation":"count"},"limit":10},{"facet":"@action.name","sort":{"order":"desc","aggregation":"count"},"limit":10}],"multi_compute":[{"aggregation":"count"},{"facet":"@error.type","aggregation":"cardinality"},{"facet":"@error.is_crash","aggregation":"cardinality"},{"facet":"@view.long_task.count","aggregation":"avg"}]}}]}}],"template_variables":[{"name":"env","default":"*","prefix":"env"},{"name":"service","default":"*","prefix":"service"},{"name":"path","default":"*","prefix":"@view.url_path"},{"name":"session_id","default":"*","prefix":"@session.id"}],"layout_type":"free","is_read_only":false,"notify_list":[],"id":"rur-7ty-r6j"}